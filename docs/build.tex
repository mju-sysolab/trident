\section{Building the Float Compiler}

The following are needed to build and run the float compiler:
\begin{itemize}
\item CVS checkout of float/compiler
\item LLVM version 1.3
\item Java compiler (we use jikes)
\item JVM (we use j2sdk-1.4.2\_08)
\item Ant (we use Ant version 1.6.2)
\item Antlr  
\item Dotty
\item Python
\end{itemize}

The float compiler uses LLVM as a front end, so LLVM must be installed on your system.  It is available from http://llvm.cs.uiuc.edu.  Currently the float compiler is using LLVM version 1.3.  We installed an optimized version (which they call "Release"), because if you install the debug version, you are required to use GCC 3.4.0 and we wanted to be more flexible. Note: we installed llvm in /n/projects/rcc/float/llvm-1.3.  Once LLVM is installed, you need to set up your environment appropriately.  We execute the following from a script called llvm.csh located in /n/projects/rcc/float/llvm-1.3, so you can just "source" that script.

\begin{verbatim}

setenv LLVM_TOP /n/projects/rcc/float/llvm-1.3/
setenv LLVMGCCDIR $LLVM_TOP/cfrontend/x86/llvm-gcc

alias llvmgcc $LLVMGCCDIR/bin/gcc
alias llvmg++ $LLVMGCCDIR/bin/g++

setenv LLVM_LIB_SEARCH_PATH $LLVMGCCDIR/bytecode-libs
set path= ( $path $LLVM_TOP/obj/tools/Release/ )

\end{verbatim}


Next, make sure you check out (from CVS) float/compiler.  

For llv, it is a project of LLVM and the source is in float/compiler/llvm-1.3.  It must be compiled according to its Makefile and then the llv binary can be put in your llvm installation's obj/tools/Release, where the llvm binaries are also.

JAVA\_HOME should be set to the location of your JVM.   We use /packages/lib/j2sdk-1.4.2\_08.

CLASS\_PATH should be set to ".".

Your path should include your ant (we use /packages/lib/apache-ant-1.6.2), your JAVA\_HOME/bin, your Java compiler, your "dotty" and "python" (which for us are in /packages/bin).

Now, to build the Java part of the compiler (fp) you can either build from the compiler directory or from the fp directory.   From the compiler directory, the ant targets are "init-fp", "compile-fp"and "clean-fp".  This builds a directory called "build" at the same level as "fp" and "examples", where the source files are copied and the compiled files will also be put.  You can also build the compiler from the fp directory.  There the ant targets are "init", "compile" and "clean".
 




